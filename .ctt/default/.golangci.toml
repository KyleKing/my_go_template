# Configuration file for golangci-lint
# For more options, see https://golangci-lint.run/usage/configuration/

version = 2

[linters]
disable = [
  "depguard", # requires allowlist/denylist configuration
  "execinquery", # deprecated in favor of gosec G202
  "exportloopref", # deprecated, replaced by copyloopvar
  "forbidigo", # requires custom regex configuration
  "gomnd", # replaced by mnd
  "wsl" # deprecated, whitespace linting too nitpicky
]
enable = [
  "asciicheck",
  "bidichk",
  "bodyclose",
  "containedctx",
  "contextcheck",
  "copyloopvar",
  "cyclop",
  "decorder",
  "dogsled",
  "dupl",
  "dupword",
  "durationcheck",
  "err113",
  "errcheck",
  "errchkjson",
  "errname",
  "errorlint",
  "exhaustive",
  "fatcontext",
  "forcetypeassert",
  "funlen",
  "gci",
  "ginkgolinter",
  "gocheckcompilerdirectives",
  "gochecknoglobals",
  "gochecknoinits",
  "gochecksumtype",
  "gocognit",
  "goconst",
  "gocritic",
  "gocyclo",
  "godot",
  "godox",
  "gofmt",
  "gofumpt",
  "goheader",
  "goimports",
  "gomoddirectives",
  "gomodguard",
  "goprintffuncname",
  "gosec",
  "gosimple",
  "gosmopolitan",
  "govet",
  "grouper",
  "iface",
  "importas",
  "inamedparam",
  "ineffassign",
  "interfacebloat",
  "intrange",
  "ireturn",
  "lll",
  "loggercheck",
  "maintidx",
  "makezero",
  "mirror",
  "misspell",
  "mnd",
  "musttag",
  "nakedret",
  "nestif",
  "nilerr",
  "nilnil",
  "nlreturn",
  "noctx",
  "nolintlint",
  "nonamedreturns",
  "nosprintfhostport",
  "paralleltest",
  "perfsprint",
  "prealloc",
  "predeclared",
  "promlinter",
  "protogetter",
  "reassign",
  "revive",
  "rowserrcheck",
  "sloglint",
  "spancheck",
  "sqlclosecheck",
  "staticcheck",
  "stylecheck",
  "tagalign",
  "tagliatelle",
  "tenv",
  "testableexamples",
  "testifylint",
  "testpackage",
  "thelper",
  "tparallel",
  "typecheck",
  "unconvert",
  "unparam",
  "unused",
  "usestdlibvars",
  "wastedassign",
  "whitespace",
  "wrapcheck",
  "zerologlint"
]

[linters.settings.cyclop]
max-complexity = 15
skip-tests = true

[linters.settings.dupl]
threshold = 100

[linters.settings.errcheck]
check-type-assertions = true
check-blank = true

[linters.settings.exhaustive]
default-signifies-exhaustive = true

[linters.settings.funlen]
lines = 100
statements = 50
ignore-comments = true

[linters.settings.gci]
sections = ["standard", "default", "prefix(github.com/user_ctt/test-template)"]

[linters.settings.gocognit]
min-complexity = 20

[linters.settings.goconst]
min-len = 3
min-occurrences = 3
ignore-tests = true

[linters.settings.gocritic]
enabled-tags = ["diagnostic", "style", "performance", "experimental", "opinionated"]
disabled-checks = ["whyNoLint"]

[linters.settings.gocyclo]
min-complexity = 15

[linters.settings.godot]
scope = "declarations"
capital = true

[linters.settings.gofumpt]
extra-rules = true
lang-version = "1.23"

[linters.settings.goheader]
template = """\
  Copyright (c) 2026 Carl The Template
  SPDX-License-Identifier: MIT\
  """
values.regexp.copyright-year = "20[0-9]{2}"

[linters.settings.goimports]
local-prefixes = "github.com/user_ctt/test-template"

[linters.settings.gomodguard]
blocked.modules = []

[linters.settings.govet]
enable-all = true
disable = ["shadow"]

[linters.settings.ireturn]
allow = ["error", "empty", "stdlib"]

[linters.settings.lll]
line-length = 120
tab-width = 4

[linters.settings.misspell]
locale = "US"

[linters.settings.mnd]
ignored-functions = ["make", "strconv.*"]

[linters.settings.nakedret]
max-func-lines = 30

[linters.settings.nestif]
min-complexity = 5

[linters.settings.nlreturn]
block-size = 2

[linters.settings.nolintlint]
allow-unused = false
require-explanation = true
require-specific = true

[linters.settings.revive]
enable-all-rules = false
rules = [
  {name = "atomic"},
  {name = "blank-imports"},
  {name = "bool-literal-in-expr"},
  {name = "call-to-gc"},
  {name = "confusing-naming"},
  {name = "constant-logical-expr"},
  {name = "context-as-argument"},
  {name = "context-keys-type"},
  {name = "defer"},
  {name = "dot-imports"},
  {name = "early-return"},
  {name = "empty-block"},
  {name = "empty-lines"},
  {name = "error-naming"},
  {name = "error-return"},
  {name = "error-strings"},
  {name = "errorf"},
  {name = "exported"},
  {name = "if-return"},
  {name = "import-shadowing"},
  {name = "increment-decrement"},
  {name = "indent-error-flow"},
  {name = "modifies-parameter"},
  {name = "modifies-value-receiver"},
  {name = "package-comments"},
  {name = "range"},
  {name = "range-val-address"},
  {name = "range-val-in-closure"},
  {name = "receiver-naming"},
  {name = "redefines-builtin-id"},
  {name = "string-of-int"},
  {name = "struct-tag"},
  {name = "superfluous-else"},
  {name = "time-equal"},
  {name = "time-naming"},
  {name = "unexported-naming"},
  {name = "unexported-return"},
  {name = "unnecessary-stmt"},
  {name = "unreachable-code"},
  {name = "unused-parameter"},
  {name = "unused-receiver"},
  {name = "use-any"},
  {name = "useless-break"},
  {name = "var-declaration"},
  {name = "var-naming"},
  {name = "waitgroup-by-value"}
]

[linters.settings.staticcheck]
checks = ["all"]

[linters.settings.stylecheck]
checks = ["all", "-ST1000"]
dot-import-whitelist = []
http-status-code-whitelist = []

[linters.settings.tagliatelle]
case.rules.json = "snake"
case.rules.yaml = "kebab"

[linters.settings.testifylint]
enable-all = true

[linters.settings.unparam]
check-exported = true

[linters.settings.wrapcheck]
ignoreSigs = [
  ".Errorf(",
  "errors.New(",
  "errors.Unwrap(",
  "errors.Join(",
  ".Wrap(",
  ".Wrapf(",
  ".WithMessage(",
  ".WithMessagef(",
  ".WithStack("
]

[run]
timeout = "5m"
